<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title id="page-title">Log in | SHMC Appointment</title>
  
  <link rel="shortcut icon" href="static/images/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..800;1,200..800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
    integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="static/css/styles.css">

</head>

<body>
  <div class="bg-img"></div>
  <div id="root">
    <div class="container-xxl py-4 px-0 px-sm-5">

      <div class="form-container p-4 mx-sm-0 m-auto rounded-5">

        <div class="logo-full mx-auto"></div>

        <form action="#">
          <p class="h4 pt-4 pb-2">Log In</p>
          <div class="mb-2">
            <label class="form-label mb-1" for="username">Username</label>
            <input class="form-control form-control-sm rounded-3" type="text" name="username" id="username" tabindex="1"
              required>
          </div>
          <div class="mb-2">
            <label class="form-label mb-1" for="password">Password</label>
            <div class="input-group input-password">
              <input class="pass form-control form-control-sm rounded-3" type="password" name="password" id="password"
                tabindex="2" required>

              <!-- visibility toggle button -->
              <div class="toggle-btn d-flex justify-content-center">
                <input class="btn-check" type="checkbox" name="visibility" id="visibility" tabindex="-1"
                  autocomplete="off">
                <label class="btn m-auto p-0 text-muted border-0" for="visibility">
                  <i class="align-middle fa-solid fa-eye-slash"></i>
                </label>
              </div>
            </div>
          </div>

          <div class="mb-2 mt-4 row justify-content-between align-items-center">
            <div class="col my-2">
              <button type="button" class="btn btn-link p-0 text-decoration-none" tabindex="0" data-bs-toggle="modal"
                data-bs-target="#modal-forgot-pass" id="btn-reset-pass">
                <small>Forgot Password</small>
              </button>

            </div>
            <div class="col-auto my-2">
              <input class="btn btn-primary px-4" type="submit" tabindex="3" value="Log In">
            </div>
          </div>
          <div class="mb-2 mt-5 px-2 text-center small align-middle">
            <span class="text-muted">Don't have an account?</span>
            <a class="text-decoration-none" href="register.html">
              <span>Register</span>
            </a>
          </div>
        </form>

      </div>

    </div>

    <div class="modal fade" id="modal-forgot-pass" tabindex="-1" aria-labelledby="modal-label" aria-hidden="true">
      <div class="modal-dialog my-5">
        <div class="modal-content mx-auto" style="max-width: 350px;">
          <div class="modal-header border-0">
            <h1 class="modal-title fs-5" id="modal-label">Forgot password</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" tabindex="0"></button>
          </div>
          <div class="modal-body">

            <div class="tab-panels" id="tab-panels">

              <!-- panel 1 -->
              <div class="panel fade d-block show">

                <div class="mb-2">
                  <label class="form-label mb-1" for="enter-email">Enter your email address</label>
                  <input class="form-control form-control-sm rounded-3" type="email" name="enter-email"
                    id="enter-email">
                </div>

              </div>

              <!-- panel 2 -->
              <div class="panel fade">

                <p class="small text-muted mb-4">
                  The verification code has been sent. Please check your email and enter
                  the code below to continue.
                </p>
                <div class="mb-4">
                  <label class="form-label mb-1" for="enter-code">Enter the verification code</label>
                  <input class="form-control form-control-sm rounded-3" type="text" name="enter-code" id="enter-code">
                </div>
                <p class="small text-muted align-middle">
                  Didn't receive the code?
                  <a class="text-decoration-none" href="#" id="check-email">Check the email address</a>
                  you entered or
                  <a class="text-decoration-none" href="#" id="resend-code">resend code.</a>
                </p>

              </div>

              <!-- panel 3 -->
              <div class="panel fade">

                <div class="mb-2">
                  <label class="form-label mb-1" for="pass-1">Enter new password</label>
                  <div class="input-group input-password">
                    <input class="form-control form-control-sm rounded-3" type="password" name="pass-1" id="pass-1"
                      tabindex="2">

                    <div class="toggle-btn d-flex justify-content-center">
                      <input class="btn-check" type="checkbox" name="vs-1" id="vs-1" tabindex="-1" autocomplete="off">
                      <label class="btn text-muted m-auto p-0 border-0 align-middle" for="vs-1">
                        <i class="align-middle fa-solid fa-eye-slash"></i>
                      </label>
                    </div>

                  </div>
                </div>

                <div class="mb-2">
                  <label class="form-label mb-1" for="pass-2">Confirm password</label>
                  <div class="input-group input-password">
                    <input class="form-control form-control-sm rounded-3" type="password" name="pass-2" id="pass-2"
                      tabindex="2">

                    <div class="toggle-btn d-flex justify-content-center">
                      <input class="btn-check" type="checkbox" name="vs-2" id="vs-2" tabindex="-1" autocomplete="off">
                      <label class="btn text-muted m-auto p-0 border-0 align-middle" for="vs-2">
                        <i class="align-middle fa-solid fa-eye-slash"></i>
                      </label>
                    </div>

                  </div>
                </div>
              </div>

              <!-- panel 4 -->
              <div class="panel fade">

                <p class="text-center text-success">
                  <i class="fa-regular fa-circle-check fa-4x"></i>
                </p>
                <p class="fs-4 mb-2 text-center">Password Changed!</p>
                <p class="small text-muted mb-2 text-center">
                  Your password has been changed successfuly.
                </p>

              </div>
            </div>
          </div>
          <div class="modal-footer border-0">
            <button type="button" class="btn btn-primary" id="modal-btn-primary">Send code</button>
          </div>
        </div>
      </div>
    </div>

  </div>


  <script src="static/js/App.js"></script>
  <script>
    (() => {
      let resetPassButton = document.getElementById('btn-reset-pass');
      let tabs = document.getElementById('tab-panels').children;
      let tabIndex = 0;
      let modalButton = document.getElementById('modal-btn-primary');
      let checkEmailButton = document.getElementById('check-email');
      let resendCodeButton = document.getElementById('resend-code');

      checkEmailButton.onclick = () => {
        tabIndex--;
        updatePanel();
      };

      resendCodeButton.onclick = () => {
        alert('Code sent');
      }

      function updatePanel() {
        for (let i = 0; i < tabs.length; i++) {
          if (i == tabIndex) {
            tabs[i].classList.add('d-block');
            setTimeout(() => tabs[i].classList.add('show'), 100);
          }
          else {
            tabs[i].classList.remove('d-block');
            tabs[i].classList.remove('show');
          }
        }
      }

      resetPassButton.onclick = () => {
        tabIndex = 0;
        modalButton.classList.remove('d-none');
        modalButton.innerHTML = 'Send code';

        updatePanel();

        // clear prev inputs
        let inputFields = document.getElementById('tab-panels').querySelectorAll('input');
        inputFields.forEach(element => element.value = '')
      }
      modalButton.onclick = function () {
        if (tabIndex >= 0 && tabIndex < tabs.length - 1) {

          tabIndex++;

          if (tabIndex == 0) {
            this.innerHTML = 'Send code';
          }
          else if (tabIndex == 1) {
            this.innerHTML = 'Continue';
          }
          else if (tabIndex == 2) {
            this.innerHTML = 'Reset password';

            // validate
          }
          else {
            this.classList.add('d-none');
          }
        }
        else {
          this.setAttribute('data-bs-dismiss', 'modal');
          this.click();
          setTimeout(() => {
            this.setAttribute('data-bs-dismiss', '');
          }, 100);
        }
        updatePanel();
      }
    })();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
</body>

</html>